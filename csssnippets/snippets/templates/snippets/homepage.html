{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>CSS Snippets</title>
    <!-- Prism core -->
    <link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-twilight.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script>
    <!-- Add languages -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-markup.min.js"></script> <!-- HTML -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-css.min.js"></script> <!-- CSS -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-javascript.min.js"></script> <!-- JS -->
    <link rel="stylesheet" href="{% static 'snippets/css/base.css' %}" />
    <link rel="stylesheet" href="{% static 'snippets/css/components/nav.css' %}" />
    <link rel="stylesheet" href="{% static 'snippets/css/components/codeBlock.css' %}" />
    <link rel="stylesheet" href="{% static 'snippets/css/components/snippets.css' %}" />
    <link rel="stylesheet" href="{% static 'snippets/css/main.css' %}" />
    <link rel="stylesheet" href="{% static 'snippets/css/post.css' %}" />
  </head>
  <body>
    <div class="nav-toggle" id="nav-toggle">â˜°</div>

    <nav>
      <div class="snippet-nav" id="snippet-nav">
        {% for snippet in snippets %}
          <a href="#snippet-{{ forloop.counter0 }}">{{ snippet.title }}</a>
        {% endfor %}
      </div>
    </nav>

    <main>
      {% if snippets %}
        <div class="snippets" id="snippets">
          {% for snippet in snippets %}
            <details class="details" id="snippet-{{ forloop.counter0 }}">
              <summary>
                <button class="copy-button" id="copy-button-{{ forloop.counter0 }}"></button>
                <h3 class="title">{{ snippet.title }}</h3>
                <pre>
                    <code class="code-preview language-{{ snippet.preview_language }}" id="codePreview-{{ forloop.counter0 }}">{{ snippet.code_preview }}</code>
                </pre>
              </summary>

              <div class="body">
                <p class="description">{{ snippet.description }}</p>

                {% for body in snippet.bodies.all %}
                  {% if body.block_type == 'p' %}
                    <p class="part">{{ body.content }}</p>
                  {% elif body.block_type == 'h3' %}
                    <h3 class="part">{{ body.content }}</h3>
                  {% elif body.block_type == 'code' %}
                    <pre class="part"><code class="language-{{ body.language }}">{{ body.content }}</code></pre>
                  {% endif %}
                {% endfor %}
              </div>
            </details>
          {% endfor %}
        </div>
      {% else %}
        <p>No snippets yet.</p>
      {% endif %}
    </main>

    <script type="module" src="{% static 'snippets/js/main.js' %}"></script>
  </body>
</html>

{% comment %}

<body>
  <h1>All CSS Snippets</h1>
  {% if snippets %}
    <ul>
      {% for snippet in snippets %}
        <li>
          <h2>{{ snippet.title }}</h2>
          <p>{{ snippet.description }}</p>
          <pre>{{ snippet.code_preview }}</pre>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No snippets yet.</p>
  {% endif %}
</body>

{% endcomment %}

<template>
  <details class="details">
    <summary>
      <button class="copy-button"></button>
      <h3 class="title"></h3>
      <pre>
        <code class="code-preview"></code>
      </pre>
    </summary>

    <div class="body">
      <p class="description"></p>
    </div>
  </details>
</template>
